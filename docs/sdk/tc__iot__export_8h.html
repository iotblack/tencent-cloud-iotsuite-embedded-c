<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>tencent-cloud-iotsuite-embedded-c: include/tc_iot_export.h 文件参考</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">tencent-cloud-iotsuite-embedded-c
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">SDK/document</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'搜索');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>首页</span></a></li>
      <li><a href="annotated.html"><span>结构体</span></a></li>
      <li class="current"><a href="files.html"><span>文件</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="搜索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>文件列表</span></a></li>
      <li><a href="globals.html"><span>全局定义</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">函数</a>  </div>
  <div class="headertitle">
<div class="title">tc_iot_export.h 文件参考</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="tc__iot__inc_8h_source.html">tc_iot_inc.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
tc_iot_export.h 的引用(Include)关系图:</div>
<div class="dyncontent">
<div class="center"><img src="tc__iot__export_8h__incl.png" border="0" usemap="#include_2tc__iot__export_8h" alt=""/></div>
<map name="include_2tc__iot__export_8h" id="include_2tc__iot__export_8h">
<area shape="rect" id="node2" href="tc__iot__inc_8h.html" title="tc_iot_inc.h" alt="" coords="1856,102,1945,129"/>
<area shape="rect" id="node3" href="tc__iot__external_8h.html" title="tc_iot_external.h" alt="" coords="320,206,439,233"/>
<area shape="rect" id="node8" href="tc__iot__log_8h.html" title="common/tc_iot_log.h" alt="" coords="605,206,748,233"/>
<area shape="rect" id="node9" href="tc__iot__const_8h.html" title="common/tc_iot_const.h" alt="" coords="772,206,931,233"/>
<area shape="rect" id="node10" href="tc__iot__bit_8h.html" title="common/tc_iot_bit.h" alt="" coords="955,206,1095,233"/>
<area shape="rect" id="node11" href="tc__iot__safety__check_8h.html" title="common/tc_iot_safety\l_check.h" alt="" coords="1119,199,1269,240"/>
<area shape="rect" id="node12" href="tc__iot__md5_8h.html" title="common/tc_iot_md5.h" alt="" coords="1293,206,1444,233"/>
<area shape="rect" id="node13" href="tc__iot__hmac_8h.html" title="common/tc_iot_hmac.h" alt="" coords="1468,206,1627,233"/>
<area shape="rect" id="node14" href="tc__iot__hal__os_8h.html" title="platform/tc_iot_hal_os.h" alt="" coords="1651,206,1812,233"/>
<area shape="rect" id="node15" href="tc__iot__hal__timer_8h.html" title="platform/tc_iot_hal\l_timer.h" alt="" coords="1836,199,1965,240"/>
<area shape="rect" id="node16" href="tc__iot__hal__network_8h.html" title="platform/tc_iot_hal\l_network.h" alt="" coords="1989,199,2119,240"/>
<area shape="rect" id="node17" href="tc__iot__ya__buffer_8h.html" title="common/tc_iot_ya_buffer.h" alt="" coords="2143,206,2323,233"/>
<area shape="rect" id="node18" href="tc__iot__http__utils_8h.html" title="common/tc_iot_http\l_utils.h" alt="" coords="2347,199,2484,240"/>
<area shape="rect" id="node19" href="tc__iot__base64_8h.html" title="common/tc_iot_base64.h" alt="" coords="2509,206,2677,233"/>
<area shape="rect" id="node20" href="tc__iot__json_8h.html" title="common/tc_iot_json.h" alt="" coords="2701,206,2852,233"/>
<area shape="rect" id="node21" href="tc__iot__url_8h.html" title="common/tc_iot_url.h" alt="" coords="2876,206,3016,233"/>
<area shape="rect" id="node22" href="tc__iot__config_8h.html" title="tc_iot_config.h" alt="" coords="3041,206,3147,233"/>
<area shape="rect" id="node23" href="tc__iot__certs_8h.html" title="common/tc_iot_certs.h" alt="" coords="3171,206,3326,233"/>
</map>
</div>
</div>
<p><a href="tc__iot__export_8h_source.html">浏览源代码.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
函数</h2></td></tr>
<tr class="memitem:aacdb67168a3c3b31b9ba2181282a076d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tc__iot__export_8h.html#aacdb67168a3c3b31b9ba2181282a076d">tc_iot_set_log_level</a> (<a class="el" href="tc__iot__log_8h.html#a30b9363d110f0613cca8e8b4241b737b">tc_iot_log_level_e</a> log_level)</td></tr>
<tr class="memdesc:aacdb67168a3c3b31b9ba2181282a076d"><td class="mdescLeft">&#160;</td><td class="mdescRight">tc_iot_set_log_level 设置日志最低输出级别  <a href="#aacdb67168a3c3b31b9ba2181282a076d">更多...</a><br /></td></tr>
<tr class="separator:aacdb67168a3c3b31b9ba2181282a076d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2cfdf057df51104756e79f75beee5f8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="tc__iot__log_8h.html#a30b9363d110f0613cca8e8b4241b737b">tc_iot_log_level_e</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tc__iot__export_8h.html#aa2cfdf057df51104756e79f75beee5f8">tc_iot_get_log_level</a> ()</td></tr>
<tr class="memdesc:aa2cfdf057df51104756e79f75beee5f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">tc_iot_get_log_level 获取日志最低输出级别  <a href="#aa2cfdf057df51104756e79f75beee5f8">更多...</a><br /></td></tr>
<tr class="separator:aa2cfdf057df51104756e79f75beee5f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a942f2cbf099b30ee0af067b365b87013"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tc__iot__export_8h.html#a942f2cbf099b30ee0af067b365b87013">tc_iot_log_level_enabled</a> (<a class="el" href="tc__iot__log_8h.html#a30b9363d110f0613cca8e8b4241b737b">tc_iot_log_level_e</a> log_level)</td></tr>
<tr class="memdesc:a942f2cbf099b30ee0af067b365b87013"><td class="mdescLeft">&#160;</td><td class="mdescRight">tc_iot_log_level_enabled 判断指定等级的日志，当前是否开启输出  <a href="#a942f2cbf099b30ee0af067b365b87013">更多...</a><br /></td></tr>
<tr class="separator:a942f2cbf099b30ee0af067b365b87013"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a139d227adb9a4269908fc8a4936eddfc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tc__iot__export_8h.html#a139d227adb9a4269908fc8a4936eddfc">tc_iot_mqtt_client_construct</a> (<a class="el" href="tc__iot__mqtt_8h.html#a77c4ce58b6b42a86a23a78ecf4dbdbac">tc_iot_mqtt_client</a> *p_mqtt_client, <a class="el" href="tc__iot__mqtt_8h.html#a27cc46b3cbe4d47608e47099660f0624">tc_iot_mqtt_client_config</a> *p_client_config)</td></tr>
<tr class="memdesc:a139d227adb9a4269908fc8a4936eddfc"><td class="mdescLeft">&#160;</td><td class="mdescRight">tc_iot_mqtt_client_construct 构造 MQTT client，并连接MQ服务器  <a href="#a139d227adb9a4269908fc8a4936eddfc">更多...</a><br /></td></tr>
<tr class="separator:a139d227adb9a4269908fc8a4936eddfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e1eb8d9f4ab1914b9b0e062bdc3de15"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tc__iot__export_8h.html#a4e1eb8d9f4ab1914b9b0e062bdc3de15">tc_iot_mqtt_client_destroy</a> (<a class="el" href="tc__iot__mqtt_8h.html#a77c4ce58b6b42a86a23a78ecf4dbdbac">tc_iot_mqtt_client</a> *p_mqtt_client)</td></tr>
<tr class="memdesc:a4e1eb8d9f4ab1914b9b0e062bdc3de15"><td class="mdescLeft">&#160;</td><td class="mdescRight">tc_iot_mqtt_client_destroy 关闭 MQTT client 连接，并销毁 MQTT client  <a href="#a4e1eb8d9f4ab1914b9b0e062bdc3de15">更多...</a><br /></td></tr>
<tr class="separator:a4e1eb8d9f4ab1914b9b0e062bdc3de15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab31be1a9fd2ad5ae1627cb0e686f911b"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tc__iot__export_8h.html#ab31be1a9fd2ad5ae1627cb0e686f911b">tc_iot_mqtt_client_is_connected</a> (<a class="el" href="tc__iot__mqtt_8h.html#a77c4ce58b6b42a86a23a78ecf4dbdbac">tc_iot_mqtt_client</a> *p_mqtt_client)</td></tr>
<tr class="memdesc:ab31be1a9fd2ad5ae1627cb0e686f911b"><td class="mdescLeft">&#160;</td><td class="mdescRight">tc_iot_mqtt_client_is_connected 判断 MQTT client 对象当前是否已连接服 务端  <a href="#ab31be1a9fd2ad5ae1627cb0e686f911b">更多...</a><br /></td></tr>
<tr class="separator:ab31be1a9fd2ad5ae1627cb0e686f911b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7649fcbe90ba1f9876c3cff38bf2ff3e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tc__iot__export_8h.html#a7649fcbe90ba1f9876c3cff38bf2ff3e">tc_iot_mqtt_client_yield</a> (<a class="el" href="tc__iot__mqtt_8h.html#a77c4ce58b6b42a86a23a78ecf4dbdbac">tc_iot_mqtt_client</a> *p_mqtt_client, int timeout_ms)</td></tr>
<tr class="memdesc:a7649fcbe90ba1f9876c3cff38bf2ff3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">tc_iot_mqtt_client_yield MQTT client 主循环，包含心跳维持、上行消息响应超时检测、服务器下行消息收取等操作。  <a href="#a7649fcbe90ba1f9876c3cff38bf2ff3e">更多...</a><br /></td></tr>
<tr class="separator:a7649fcbe90ba1f9876c3cff38bf2ff3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa673b011aecfe47e0edff75f73b39afd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tc__iot__export_8h.html#aa673b011aecfe47e0edff75f73b39afd">tc_iot_mqtt_client_publish</a> (<a class="el" href="tc__iot__mqtt_8h.html#a77c4ce58b6b42a86a23a78ecf4dbdbac">tc_iot_mqtt_client</a> *p_mqtt_client, const char *topic, <a class="el" href="tc__iot__mqtt_8h.html#a7465cd5772185e750ef5c75eba011a2f">tc_iot_mqtt_message</a> *msg)</td></tr>
<tr class="memdesc:aa673b011aecfe47e0edff75f73b39afd"><td class="mdescLeft">&#160;</td><td class="mdescRight">tc_iot_mqtt_client_publish 向指定的 Topic 发布消息  <a href="#aa673b011aecfe47e0edff75f73b39afd">更多...</a><br /></td></tr>
<tr class="separator:aa673b011aecfe47e0edff75f73b39afd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82181f39263c85a68b8b2e077fa213e9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tc__iot__export_8h.html#a82181f39263c85a68b8b2e077fa213e9">tc_iot_mqtt_client_subscribe</a> (<a class="el" href="tc__iot__mqtt_8h.html#a77c4ce58b6b42a86a23a78ecf4dbdbac">tc_iot_mqtt_client</a> *p_mqtt_client, const char *topic_filter, <a class="el" href="tc__iot__mqtt_8h.html#a9ca8591a18aa8241856597866b37a366">tc_iot_mqtt_qos_e</a> qos, <a class="el" href="tc__iot__mqtt_8h.html#adc1265ae64dab46c36579d229d0eb11a">message_handler</a> msg_handler, void *context)</td></tr>
<tr class="memdesc:a82181f39263c85a68b8b2e077fa213e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">tc_iot_mqtt_client_subscribe 订阅指定一个或多个 Topic 的消息  <a href="#a82181f39263c85a68b8b2e077fa213e9">更多...</a><br /></td></tr>
<tr class="separator:a82181f39263c85a68b8b2e077fa213e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09134bf2b5efb12b4f3f653958819b46"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tc__iot__export_8h.html#a09134bf2b5efb12b4f3f653958819b46">tc_iot_mqtt_client_unsubscribe</a> (<a class="el" href="tc__iot__mqtt_8h.html#a77c4ce58b6b42a86a23a78ecf4dbdbac">tc_iot_mqtt_client</a> *p_mqtt_client, const char *topic_filter)</td></tr>
<tr class="memdesc:a09134bf2b5efb12b4f3f653958819b46"><td class="mdescLeft">&#160;</td><td class="mdescRight">tc_iot_mqtt_client_unsubscribe 取消对某个或多个 Topic 订阅  <a href="#a09134bf2b5efb12b4f3f653958819b46">更多...</a><br /></td></tr>
<tr class="separator:a09134bf2b5efb12b4f3f653958819b46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56f0792b713a4067f8ec6f39a6f9cf70"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tc__iot__export_8h.html#a56f0792b713a4067f8ec6f39a6f9cf70">tc_iot_mqtt_client_disconnect</a> (<a class="el" href="tc__iot__mqtt_8h.html#a77c4ce58b6b42a86a23a78ecf4dbdbac">tc_iot_mqtt_client</a> *p_mqtt_client)</td></tr>
<tr class="memdesc:a56f0792b713a4067f8ec6f39a6f9cf70"><td class="mdescLeft">&#160;</td><td class="mdescRight">tc_iot_mqtt_client_disconnect 断开 MQTT client 与服务端的连接  <a href="#a56f0792b713a4067f8ec6f39a6f9cf70">更多...</a><br /></td></tr>
<tr class="separator:a56f0792b713a4067f8ec6f39a6f9cf70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac19ed60474eda4cb0aa71f5502702674"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tc__iot__export_8h.html#ac19ed60474eda4cb0aa71f5502702674">tc_iot_server_init</a> (<a class="el" href="tc__iot__shadow_8h.html#acd4137023aa1d1059b75fc2a31bb92c6">tc_iot_shadow_client</a> *p_shadow_client, <a class="el" href="tc__iot__shadow_8h.html#a83a16bc5fc5ae019a28afe92e77a9b43">tc_iot_shadow_config</a> *p_client_config)</td></tr>
<tr class="memdesc:ac19ed60474eda4cb0aa71f5502702674"><td class="mdescLeft">&#160;</td><td class="mdescRight">tc_iot_server_init 根据设备配置参数，初始化服务。  <a href="#ac19ed60474eda4cb0aa71f5502702674">更多...</a><br /></td></tr>
<tr class="separator:ac19ed60474eda4cb0aa71f5502702674"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb1e29725d6bf7b8dd0cce6a13570958"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tc__iot__export_8h.html#acb1e29725d6bf7b8dd0cce6a13570958">tc_iot_server_loop</a> (<a class="el" href="tc__iot__shadow_8h.html#acd4137023aa1d1059b75fc2a31bb92c6">tc_iot_shadow_client</a> *p_shadow_client, int yield_timeout)</td></tr>
<tr class="memdesc:acb1e29725d6bf7b8dd0cce6a13570958"><td class="mdescLeft">&#160;</td><td class="mdescRight">tc_iot_server_loop 服务任务主循环函数，接收服务推送及响应数据。  <a href="#acb1e29725d6bf7b8dd0cce6a13570958">更多...</a><br /></td></tr>
<tr class="separator:acb1e29725d6bf7b8dd0cce6a13570958"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9ac071176fa16739d07b3ab20fa3e7b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tc__iot__export_8h.html#aa9ac071176fa16739d07b3ab20fa3e7b">tc_iot_server_destroy</a> (<a class="el" href="tc__iot__shadow_8h.html#acd4137023aa1d1059b75fc2a31bb92c6">tc_iot_shadow_client</a> *p_shadow_client)</td></tr>
<tr class="memdesc:aa9ac071176fa16739d07b3ab20fa3e7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">tc_iot_server_destroy 数据模板服务析构处理，释放资源。  <a href="#aa9ac071176fa16739d07b3ab20fa3e7b">更多...</a><br /></td></tr>
<tr class="separator:aa9ac071176fa16739d07b3ab20fa3e7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f98e70812afbe8f44dadb3201227580"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tc__iot__export_8h.html#a9f98e70812afbe8f44dadb3201227580">tc_iot_report_device_data</a> (<a class="el" href="tc__iot__shadow_8h.html#acd4137023aa1d1059b75fc2a31bb92c6">tc_iot_shadow_client</a> *p_shadow_client)</td></tr>
<tr class="memdesc:a9f98e70812afbe8f44dadb3201227580"><td class="mdescLeft">&#160;</td><td class="mdescRight">tc_iot_report_device_data  <a href="#a9f98e70812afbe8f44dadb3201227580">更多...</a><br /></td></tr>
<tr class="separator:a9f98e70812afbe8f44dadb3201227580"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af83fdac8922c95bc41dc35801729064e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tc__iot__export_8h.html#af83fdac8922c95bc41dc35801729064e">tc_iot_confirm_devcie_data</a> (<a class="el" href="tc__iot__shadow_8h.html#acd4137023aa1d1059b75fc2a31bb92c6">tc_iot_shadow_client</a> *p_shadow_client)</td></tr>
<tr class="memdesc:af83fdac8922c95bc41dc35801729064e"><td class="mdescLeft">&#160;</td><td class="mdescRight">tc_iot_confirm_devcie_data  <a href="#af83fdac8922c95bc41dc35801729064e">更多...</a><br /></td></tr>
<tr class="separator:af83fdac8922c95bc41dc35801729064e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5e88ce68c03d61b18a5ce8eed0dbfb5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tc__iot__export_8h.html#aa5e88ce68c03d61b18a5ce8eed0dbfb5">tc_iot_coap_construct</a> (<a class="el" href="tc__iot__coap_8h.html#ae583b623159b80f7add42721db4c0a5b">tc_iot_coap_client</a> *c, <a class="el" href="tc__iot__coap_8h.html#aff29eeb74c634baf2cfef3fd617dc1c8">tc_iot_coap_client_config</a> *p_client_config)</td></tr>
<tr class="memdesc:aa5e88ce68c03d61b18a5ce8eed0dbfb5"><td class="mdescLeft">&#160;</td><td class="mdescRight">tc_iot_coap_construct 初始化 CoAP 客户端数据  <a href="#aa5e88ce68c03d61b18a5ce8eed0dbfb5">更多...</a><br /></td></tr>
<tr class="separator:aa5e88ce68c03d61b18a5ce8eed0dbfb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2ab8e6d3c517d1f3effe5010ac46405"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tc__iot__export_8h.html#ac2ab8e6d3c517d1f3effe5010ac46405">tc_iot_coap_auth</a> (<a class="el" href="tc__iot__coap_8h.html#ae583b623159b80f7add42721db4c0a5b">tc_iot_coap_client</a> *c)</td></tr>
<tr class="memdesc:ac2ab8e6d3c517d1f3effe5010ac46405"><td class="mdescLeft">&#160;</td><td class="mdescRight">tc_iot_coap_auth 发起认证，获取后续服务所需的设备 Token。  <a href="#ac2ab8e6d3c517d1f3effe5010ac46405">更多...</a><br /></td></tr>
<tr class="separator:ac2ab8e6d3c517d1f3effe5010ac46405"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fcc62d708ef0d66e4e1162d318cbc3e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tc__iot__export_8h.html#a7fcc62d708ef0d66e4e1162d318cbc3e">tc_iot_coap_send_message</a> (<a class="el" href="tc__iot__coap_8h.html#ae583b623159b80f7add42721db4c0a5b">tc_iot_coap_client</a> *c, <a class="el" href="tc__iot__coap_8h.html#a19494cc90e3e40e77c12c4b1dc0e3397">tc_iot_coap_message</a> *message, <a class="el" href="tc__iot__coap_8h.html#afade0372942516f1333c96265f4c2ed8">tc_iot_coap_con_handler</a> callback, int timeout_ms, void *session_context)</td></tr>
<tr class="memdesc:a7fcc62d708ef0d66e4e1162d318cbc3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">tc_iot_coap_send_message 向服务端发送 CoAP 消息。  <a href="#a7fcc62d708ef0d66e4e1162d318cbc3e">更多...</a><br /></td></tr>
<tr class="separator:a7fcc62d708ef0d66e4e1162d318cbc3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a109862c8efcdae4b66feaf21905a832f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tc__iot__export_8h.html#a109862c8efcdae4b66feaf21905a832f">tc_iot_coap_publish</a> (<a class="el" href="tc__iot__coap_8h.html#ae583b623159b80f7add42721db4c0a5b">tc_iot_coap_client</a> *c, const char *uri_path, const char *topic_query_uri, const char *msg, <a class="el" href="tc__iot__coap_8h.html#afade0372942516f1333c96265f4c2ed8">tc_iot_coap_con_handler</a> callback)</td></tr>
<tr class="memdesc:a109862c8efcdae4b66feaf21905a832f"><td class="mdescLeft">&#160;</td><td class="mdescRight">tc_iot_coap_publish 为基于 tc_iot_coap_send_message 的上层逻辑封装，用来单向发送上报消息。  <a href="#a109862c8efcdae4b66feaf21905a832f">更多...</a><br /></td></tr>
<tr class="separator:a109862c8efcdae4b66feaf21905a832f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b4f3b8d7eeed8ebb2267a974e3145a7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tc__iot__export_8h.html#a1b4f3b8d7eeed8ebb2267a974e3145a7">tc_iot_coap_rpc</a> (<a class="el" href="tc__iot__coap_8h.html#ae583b623159b80f7add42721db4c0a5b">tc_iot_coap_client</a> *c, const char *uri_path, const char *topic_query_uri, const char *topic_resp_uri, const char *msg, <a class="el" href="tc__iot__coap_8h.html#afade0372942516f1333c96265f4c2ed8">tc_iot_coap_con_handler</a> callback)</td></tr>
<tr class="memdesc:a1b4f3b8d7eeed8ebb2267a974e3145a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">tc_iot_coap_rpc 为基于 tc_iot_coap_send_message 的上层逻辑封装，用来调用影子服务或基于自定义 Topic 的远程服务。  <a href="#a1b4f3b8d7eeed8ebb2267a974e3145a7">更多...</a><br /></td></tr>
<tr class="separator:a1b4f3b8d7eeed8ebb2267a974e3145a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a852825cfeb98415a14f0563e58c37b97"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tc__iot__export_8h.html#a852825cfeb98415a14f0563e58c37b97">tc_iot_coap_yield</a> (<a class="el" href="tc__iot__coap_8h.html#ae583b623159b80f7add42721db4c0a5b">tc_iot_coap_client</a> *c, int timeout_ms)</td></tr>
<tr class="memdesc:a852825cfeb98415a14f0563e58c37b97"><td class="mdescLeft">&#160;</td><td class="mdescRight">tc_iot_coap_yield CoAP client 主循环，包含上行消息响应超时 检测、服务器下行消息收取等操作。  <a href="#a852825cfeb98415a14f0563e58c37b97">更多...</a><br /></td></tr>
<tr class="separator:a852825cfeb98415a14f0563e58c37b97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a6622dd19f4aecbedb175c509eabd8e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tc__iot__export_8h.html#a8a6622dd19f4aecbedb175c509eabd8e">tc_iot_coap_destroy</a> (<a class="el" href="tc__iot__coap_8h.html#ae583b623159b80f7add42721db4c0a5b">tc_iot_coap_client</a> *c)</td></tr>
<tr class="memdesc:a8a6622dd19f4aecbedb175c509eabd8e"><td class="mdescLeft">&#160;</td><td class="mdescRight">tc_iot_coap_destroy 释放 CoAP client 对象相关资源。  <a href="#a8a6622dd19f4aecbedb175c509eabd8e">更多...</a><br /></td></tr>
<tr class="separator:a8a6622dd19f4aecbedb175c509eabd8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf02d3ede2c3ba553708632bdfbc749e"><td class="memItemLeft" align="right" valign="top">unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tc__iot__export_8h.html#aaf02d3ede2c3ba553708632bdfbc749e">tc_iot_coap_get_message_code</a> (<a class="el" href="tc__iot__coap_8h.html#a19494cc90e3e40e77c12c4b1dc0e3397">tc_iot_coap_message</a> *message)</td></tr>
<tr class="memdesc:aaf02d3ede2c3ba553708632bdfbc749e"><td class="mdescLeft">&#160;</td><td class="mdescRight">tc_iot_coap_get_message_code 获取消息请求或返回码。  <a href="#aaf02d3ede2c3ba553708632bdfbc749e">更多...</a><br /></td></tr>
<tr class="separator:aaf02d3ede2c3ba553708632bdfbc749e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55737e1646a2a2e57c52dbfb0e179b48"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tc__iot__export_8h.html#a55737e1646a2a2e57c52dbfb0e179b48">tc_iot_coap_get_message_payload</a> (<a class="el" href="tc__iot__coap_8h.html#a19494cc90e3e40e77c12c4b1dc0e3397">tc_iot_coap_message</a> *message, int *payload_len, unsigned char **payload)</td></tr>
<tr class="memdesc:a55737e1646a2a2e57c52dbfb0e179b48"><td class="mdescLeft">&#160;</td><td class="mdescRight">tc_iot_coap_get_message_payload 获取 CoAP 消息的 Payload 内容。  <a href="#a55737e1646a2a2e57c52dbfb0e179b48">更多...</a><br /></td></tr>
<tr class="separator:a55737e1646a2a2e57c52dbfb0e179b48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada88e7088bee10e67e2ee1f5efdb2e26"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tc__iot__export_8h.html#ada88e7088bee10e67e2ee1f5efdb2e26">tc_iot_ota_construct</a> (<a class="el" href="tc__iot__ota__mqtt_8h.html#a701414996b15d90930d3bb1b7925c8b8">tc_iot_ota_handler</a> *ota_handler, <a class="el" href="tc__iot__mqtt_8h.html#a77c4ce58b6b42a86a23a78ecf4dbdbac">tc_iot_mqtt_client</a> *mqtt_client, const char *sub_topic, const char *pub_topic, <a class="el" href="tc__iot__mqtt_8h.html#adc1265ae64dab46c36579d229d0eb11a">message_handler</a> ota_msg_callback)</td></tr>
<tr class="memdesc:ada88e7088bee10e67e2ee1f5efdb2e26"><td class="mdescLeft">&#160;</td><td class="mdescRight">tc_iot_ota_construct 初始化 OTA 服务对象  <a href="#ada88e7088bee10e67e2ee1f5efdb2e26">更多...</a><br /></td></tr>
<tr class="separator:ada88e7088bee10e67e2ee1f5efdb2e26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ad390c38e963aeac4b838d476ff90a3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tc__iot__export_8h.html#a1ad390c38e963aeac4b838d476ff90a3">tc_iot_ota_destroy</a> (<a class="el" href="tc__iot__ota__mqtt_8h.html#a701414996b15d90930d3bb1b7925c8b8">tc_iot_ota_handler</a> *ota_handler)</td></tr>
<tr class="memdesc:a1ad390c38e963aeac4b838d476ff90a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">tc_iot_ota_destroy OTA 服务析构处理，取消 OTA 消息订阅，释放资源。  <a href="#a1ad390c38e963aeac4b838d476ff90a3">更多...</a><br /></td></tr>
<tr class="separator:a1ad390c38e963aeac4b838d476ff90a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5afcda2817b5958c738207192fda070"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tc__iot__export_8h.html#ac5afcda2817b5958c738207192fda070">tc_iot_ota_report_upgrade</a> (<a class="el" href="tc__iot__ota__mqtt_8h.html#a701414996b15d90930d3bb1b7925c8b8">tc_iot_ota_handler</a> *ota_handler, <a class="el" href="tc__iot__ota__mqtt_8h.html#a92100f9c84297cd8a36099c8a58faa5b">tc_iot_ota_state_e</a> state, char *message, int percent)</td></tr>
<tr class="memdesc:ac5afcda2817b5958c738207192fda070"><td class="mdescLeft">&#160;</td><td class="mdescRight">tc_iot_ota_report_upgrade OTA 升级执行过程中，上报固件下载及升级进度。  <a href="#ac5afcda2817b5958c738207192fda070">更多...</a><br /></td></tr>
<tr class="separator:ac5afcda2817b5958c738207192fda070"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6a809ba432d1e7a85535464940dc0f3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tc__iot__export_8h.html#ac6a809ba432d1e7a85535464940dc0f3">tc_iot_ota_report_firm</a> (<a class="el" href="tc__iot__ota__mqtt_8h.html#a701414996b15d90930d3bb1b7925c8b8">tc_iot_ota_handler</a> *ota_handler,...)</td></tr>
<tr class="memdesc:ac6a809ba432d1e7a85535464940dc0f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">tc_iot_ota_report_firm 上报设备系统信息  <a href="#ac6a809ba432d1e7a85535464940dc0f3">更多...</a><br /></td></tr>
<tr class="separator:ac6a809ba432d1e7a85535464940dc0f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11d429d2cac023a2e7a98629bf491f68"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tc__iot__export_8h.html#a11d429d2cac023a2e7a98629bf491f68">tc_iot_ota_request_content_length</a> (const char *api_url)</td></tr>
<tr class="memdesc:a11d429d2cac023a2e7a98629bf491f68"><td class="mdescLeft">&#160;</td><td class="mdescRight">tc_iot_ota_request_content_length 获取指定 URL 文件的大小。  <a href="#a11d429d2cac023a2e7a98629bf491f68">更多...</a><br /></td></tr>
<tr class="separator:a11d429d2cac023a2e7a98629bf491f68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e44c55e55e97b7437f5fdc82fdb2d1f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tc__iot__export_8h.html#a4e44c55e55e97b7437f5fdc82fdb2d1f">tc_iot_ota_download</a> (const char *api_url, int partial_start, <a class="el" href="tc__iot__ota__download_8h.html#aef8efb9ec881ea429413e8acbc909597">tc_iot_http_download_callback</a> download_callback, const void *context)</td></tr>
<tr class="memdesc:a4e44c55e55e97b7437f5fdc82fdb2d1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">tc_iot_ota_download 根据指定的固件 URL 地址，下载固件  <a href="#a4e44c55e55e97b7437f5fdc82fdb2d1f">更多...</a><br /></td></tr>
<tr class="separator:a4e44c55e55e97b7437f5fdc82fdb2d1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">函数说明</h2>
<a class="anchor" id="ac2ab8e6d3c517d1f3effe5010ac46405"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_iot_coap_auth </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tc__iot__coap_8h.html#ae583b623159b80f7add42721db4c0a5b">tc_iot_coap_client</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>tc_iot_coap_auth 发起认证，获取后续服务所需的设备 Token。 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td>已初始化好的 CoAP 客户端。</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>结果返回码 </dd></dl>
<dl class="section see"><dt>参见</dt><dd><a class="el" href="tc__iot__const_8h.html#a22976d49fd798dc8f3625734a8b6f6f6" title="系统常见错误码定义，基本定义原则： ">tc_iot_sys_code_e</a> </dd></dl>

</div>
</div>
<a class="anchor" id="aa5e88ce68c03d61b18a5ce8eed0dbfb5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_iot_coap_construct </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tc__iot__coap_8h.html#ae583b623159b80f7add42721db4c0a5b">tc_iot_coap_client</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="tc__iot__coap_8h.html#aff29eeb74c634baf2cfef3fd617dc1c8">tc_iot_coap_client_config</a> *&#160;</td>
          <td class="paramname"><em>p_client_config</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>tc_iot_coap_construct 初始化 CoAP 客户端数据 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td>待初始化的 CoAP 客户端数据结构。 </td></tr>
    <tr><td class="paramname">p_client_config</td><td>初始化相关参数，包括 CoAP 服务地址及端口、是否使用 DTLS及DTLS PSK、 产品信息、设备名称、设备密钥、回调函数等。</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>结果返回码 </dd></dl>
<dl class="section see"><dt>参见</dt><dd><a class="el" href="tc__iot__const_8h.html#a22976d49fd798dc8f3625734a8b6f6f6" title="系统常见错误码定义，基本定义原则： ">tc_iot_sys_code_e</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a8a6622dd19f4aecbedb175c509eabd8e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tc_iot_coap_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tc__iot__coap_8h.html#ae583b623159b80f7add42721db4c0a5b">tc_iot_coap_client</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>tc_iot_coap_destroy 释放 CoAP client 对象相关资源。 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td>CoAP client 对象 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aaf02d3ede2c3ba553708632bdfbc749e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char tc_iot_coap_get_message_code </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tc__iot__coap_8h.html#a19494cc90e3e40e77c12c4b1dc0e3397">tc_iot_coap_message</a> *&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>tc_iot_coap_get_message_code 获取消息请求或返回码。 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">message</td><td>CoAP 消息</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>消息请求或返回码 </dd></dl>
<dl class="section see"><dt>参见</dt><dd><a class="el" href="tc__iot__coap_8h.html#a940da97a30113272093a85c61509647e">tc_iot_coap_rsp_code</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a55737e1646a2a2e57c52dbfb0e179b48"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_iot_coap_get_message_payload </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tc__iot__coap_8h.html#a19494cc90e3e40e77c12c4b1dc0e3397">tc_iot_coap_message</a> *&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>payload_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char **&#160;</td>
          <td class="paramname"><em>payload</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>tc_iot_coap_get_message_payload 获取 CoAP 消息的 Payload 内容。 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">message</td><td>CoAP 消息 </td></tr>
    <tr><td class="paramname">payload_len</td><td>Payload 的长度 </td></tr>
    <tr><td class="paramname">payload</td><td>Payload 内容首地址</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>结果返回码，返回 TC_IOT_SUCCESS 则说明获取成功。 </dd></dl>
<dl class="section see"><dt>参见</dt><dd><a class="el" href="tc__iot__const_8h.html#a22976d49fd798dc8f3625734a8b6f6f6" title="系统常见错误码定义，基本定义原则： ">tc_iot_sys_code_e</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a109862c8efcdae4b66feaf21905a832f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_iot_coap_publish </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tc__iot__coap_8h.html#ae583b623159b80f7add42721db4c0a5b">tc_iot_coap_client</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>uri_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>topic_query_uri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="tc__iot__coap_8h.html#afade0372942516f1333c96265f4c2ed8">tc_iot_coap_con_handler</a>&#160;</td>
          <td class="paramname"><em>callback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>tc_iot_coap_publish 为基于 tc_iot_coap_send_message 的上层逻辑封装，用来单向发送上报消息。 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td>已成功获取获取授权 Token 的 CoAP 客户端。 </td></tr>
    <tr><td class="paramname">uri_path</td><td>上报接口 URI Path，当前固定填写 TC_IOT_COAP_SERVICE_PUBLISH_PATH。 </td></tr>
    <tr><td class="paramname">topic_query_uri</td><td>上报消息发送目的 Topic 参数，参数固定格式为：tp=Topic_Name，即如果上报消息到 TopicA， 参数应增加 tp= 前缀后，填写为 “tp=TopicA” </td></tr>
    <tr><td class="paramname">msg</td><td>上报消息 Payload 。 </td></tr>
    <tr><td class="paramname">callback</td><td>上报结果回调。</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>结果返回码 </dd></dl>
<dl class="section see"><dt>参见</dt><dd><a class="el" href="tc__iot__const_8h.html#a22976d49fd798dc8f3625734a8b6f6f6" title="系统常见错误码定义，基本定义原则： ">tc_iot_sys_code_e</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a1b4f3b8d7eeed8ebb2267a974e3145a7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_iot_coap_rpc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tc__iot__coap_8h.html#ae583b623159b80f7add42721db4c0a5b">tc_iot_coap_client</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>uri_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>topic_query_uri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>topic_resp_uri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="tc__iot__coap_8h.html#afade0372942516f1333c96265f4c2ed8">tc_iot_coap_con_handler</a>&#160;</td>
          <td class="paramname"><em>callback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>tc_iot_coap_rpc 为基于 tc_iot_coap_send_message 的上层逻辑封装，用来调用影子服务或基于自定义 Topic 的远程服务。 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td>已成功获取获取授权 Token 的 CoAP 客户端。 </td></tr>
    <tr><td class="paramname">uri_path</td><td>上报接口 URI Path，当前固定填写 TC_IOT_COAP_SERVICE_RPC_PATH。 </td></tr>
    <tr><td class="paramname">topic_query_uri</td><td>RPC 请求参数发送目的 Topic 参数，参数固定格式为：pt=Topic_Name，即如果到 TopicUpdate， 参数应增加 pt= 前缀后，填写为 “pt=TopicUpdate” </td></tr>
    <tr><td class="paramname">topic_resp_uri</td><td>RPC 调用响应 Topic 参数，参数固定格式为：st=Topic_Name，即如果到 TopicCmd， 参数应增加 st= 前缀后，填写为 “st=TopicUpdate” </td></tr>
    <tr><td class="paramname">msg</td><td>上报消息 Payload 。 </td></tr>
    <tr><td class="paramname">callback</td><td>RPC 调用结果回调。</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>结果返回码 </dd></dl>
<dl class="section see"><dt>参见</dt><dd><a class="el" href="tc__iot__const_8h.html#a22976d49fd798dc8f3625734a8b6f6f6" title="系统常见错误码定义，基本定义原则： ">tc_iot_sys_code_e</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a7fcc62d708ef0d66e4e1162d318cbc3e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_iot_coap_send_message </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tc__iot__coap_8h.html#ae583b623159b80f7add42721db4c0a5b">tc_iot_coap_client</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="tc__iot__coap_8h.html#a19494cc90e3e40e77c12c4b1dc0e3397">tc_iot_coap_message</a> *&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="tc__iot__coap_8h.html#afade0372942516f1333c96265f4c2ed8">tc_iot_coap_con_handler</a>&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeout_ms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>session_context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>tc_iot_coap_send_message 向服务端发送 CoAP 消息。 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td>已成功获取获取授权 Token 的 CoAP 客户端。 </td></tr>
    <tr><td class="paramname">message</td><td>待发送的消息 </td></tr>
    <tr><td class="paramname">callback</td><td>消息回调 </td></tr>
    <tr><td class="paramname">timeout_ms</td><td>消息最大等待时延 </td></tr>
    <tr><td class="paramname">session_context</td><td>消息回调透传参数</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>结果返回码 </dd></dl>
<dl class="section see"><dt>参见</dt><dd><a class="el" href="tc__iot__const_8h.html#a22976d49fd798dc8f3625734a8b6f6f6" title="系统常见错误码定义，基本定义原则： ">tc_iot_sys_code_e</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a852825cfeb98415a14f0563e58c37b97"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_iot_coap_yield </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tc__iot__coap_8h.html#ae583b623159b80f7add42721db4c0a5b">tc_iot_coap_client</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeout_ms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>tc_iot_coap_yield CoAP client 主循环，包含上行消息响应超时 检测、服务器下行消息收取等操作。 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td>CoAP client 对象 </td></tr>
    <tr><td class="paramname">timeout_ms</td><td>等待时延，单位毫秒</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>结果返回码 </dd></dl>
<dl class="section see"><dt>参见</dt><dd><a class="el" href="tc__iot__const_8h.html#a22976d49fd798dc8f3625734a8b6f6f6" title="系统常见错误码定义，基本定义原则： ">tc_iot_sys_code_e</a> </dd></dl>

</div>
</div>
<a class="anchor" id="af83fdac8922c95bc41dc35801729064e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_iot_confirm_devcie_data </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tc__iot__shadow_8h.html#acd4137023aa1d1059b75fc2a31bb92c6">tc_iot_shadow_client</a> *&#160;</td>
          <td class="paramname"><em>p_shadow_client</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>tc_iot_confirm_devcie_data </p>
<dl class="section user"><dt></dt><dd>确认服务端控制指令执行结果，如果服务端下发的 desired 指令执行成功， 则上报最新状态，并清空对应的 desired 指令。 </dd></dl>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_shadow_client</td><td>设备影子对象 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>结果返回码 </dd></dl>
<dl class="section see"><dt>参见</dt><dd><a class="el" href="tc__iot__const_8h.html#a22976d49fd798dc8f3625734a8b6f6f6" title="系统常见错误码定义，基本定义原则： ">tc_iot_sys_code_e</a> </dd></dl>

</div>
</div>
<a class="anchor" id="aa2cfdf057df51104756e79f75beee5f8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="tc__iot__log_8h.html#a30b9363d110f0613cca8e8b4241b737b">tc_iot_log_level_e</a> tc_iot_get_log_level </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>tc_iot_get_log_level 获取日志最低输出级别 </p>
<dl class="section return"><dt>返回</dt><dd>返回当前系统设置的日志级别 </dd></dl>

</div>
</div>
<a class="anchor" id="a942f2cbf099b30ee0af067b365b87013"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char tc_iot_log_level_enabled </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tc__iot__log_8h.html#a30b9363d110f0613cca8e8b4241b737b">tc_iot_log_level_e</a>&#160;</td>
          <td class="paramname"><em>log_level</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>tc_iot_log_level_enabled 判断指定等级的日志，当前是否开启输出 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">log_level</td><td>需要判断的日志级别</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>为 1 表示允许输出， 0 表示指定的日志等级低于设置，不允许输出 </dd></dl>

</div>
</div>
<a class="anchor" id="a139d227adb9a4269908fc8a4936eddfc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_iot_mqtt_client_construct </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tc__iot__mqtt_8h.html#a77c4ce58b6b42a86a23a78ecf4dbdbac">tc_iot_mqtt_client</a> *&#160;</td>
          <td class="paramname"><em>p_mqtt_client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="tc__iot__mqtt_8h.html#a27cc46b3cbe4d47608e47099660f0624">tc_iot_mqtt_client_config</a> *&#160;</td>
          <td class="paramname"><em>p_client_config</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>tc_iot_mqtt_client_construct 构造 MQTT client，并连接MQ服务器 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_mqtt_client</td><td>MQTT client 对象，出参。 </td></tr>
    <tr><td class="paramname">p_client_config</td><td>用来初始化 MQTT Client 对象的配置信息, 入参。</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>结果返回码 </dd></dl>
<dl class="section see"><dt>参见</dt><dd><a class="el" href="tc__iot__const_8h.html#a22976d49fd798dc8f3625734a8b6f6f6" title="系统常见错误码定义，基本定义原则： ">tc_iot_sys_code_e</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a4e1eb8d9f4ab1914b9b0e062bdc3de15"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tc_iot_mqtt_client_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tc__iot__mqtt_8h.html#a77c4ce58b6b42a86a23a78ecf4dbdbac">tc_iot_mqtt_client</a> *&#160;</td>
          <td class="paramname"><em>p_mqtt_client</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>tc_iot_mqtt_client_destroy 关闭 MQTT client 连接，并销毁 MQTT client </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_mqtt_client</td><td>MQTT client 对象 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a56f0792b713a4067f8ec6f39a6f9cf70"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_iot_mqtt_client_disconnect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tc__iot__mqtt_8h.html#a77c4ce58b6b42a86a23a78ecf4dbdbac">tc_iot_mqtt_client</a> *&#160;</td>
          <td class="paramname"><em>p_mqtt_client</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>tc_iot_mqtt_client_disconnect 断开 MQTT client 与服务端的连接 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_mqtt_client</td><td>MQTT client 对象</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>结果返回码 </dd></dl>
<dl class="section see"><dt>参见</dt><dd><a class="el" href="tc__iot__const_8h.html#a22976d49fd798dc8f3625734a8b6f6f6" title="系统常见错误码定义，基本定义原则： ">tc_iot_sys_code_e</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ab31be1a9fd2ad5ae1627cb0e686f911b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char tc_iot_mqtt_client_is_connected </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tc__iot__mqtt_8h.html#a77c4ce58b6b42a86a23a78ecf4dbdbac">tc_iot_mqtt_client</a> *&#160;</td>
          <td class="paramname"><em>p_mqtt_client</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>tc_iot_mqtt_client_is_connected 判断 MQTT client 对象当前是否已连接服 务端 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_mqtt_client</td><td>MQTT client 对象</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>1 表示已连接，0 表示未连接。 </dd></dl>

</div>
</div>
<a class="anchor" id="aa673b011aecfe47e0edff75f73b39afd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_iot_mqtt_client_publish </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tc__iot__mqtt_8h.html#a77c4ce58b6b42a86a23a78ecf4dbdbac">tc_iot_mqtt_client</a> *&#160;</td>
          <td class="paramname"><em>p_mqtt_client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="tc__iot__mqtt_8h.html#a7465cd5772185e750ef5c75eba011a2f">tc_iot_mqtt_message</a> *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>tc_iot_mqtt_client_publish 向指定的 Topic 发布消息 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_mqtt_client</td><td>MQTT client 对象 </td></tr>
    <tr><td class="paramname">topic</td><td>Topic 名称 </td></tr>
    <tr><td class="paramname">msg</td><td>待发送消息</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>结果返回码 </dd></dl>
<dl class="section see"><dt>参见</dt><dd><a class="el" href="tc__iot__const_8h.html#a22976d49fd798dc8f3625734a8b6f6f6" title="系统常见错误码定义，基本定义原则： ">tc_iot_sys_code_e</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a82181f39263c85a68b8b2e077fa213e9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_iot_mqtt_client_subscribe </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tc__iot__mqtt_8h.html#a77c4ce58b6b42a86a23a78ecf4dbdbac">tc_iot_mqtt_client</a> *&#160;</td>
          <td class="paramname"><em>p_mqtt_client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>topic_filter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="tc__iot__mqtt_8h.html#a9ca8591a18aa8241856597866b37a366">tc_iot_mqtt_qos_e</a>&#160;</td>
          <td class="paramname"><em>qos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="tc__iot__mqtt_8h.html#adc1265ae64dab46c36579d229d0eb11a">message_handler</a>&#160;</td>
          <td class="paramname"><em>msg_handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>tc_iot_mqtt_client_subscribe 订阅指定一个或多个 Topic 的消息 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_mqtt_client</td><td>MQTT client 对象 </td></tr>
    <tr><td class="paramname">topic_filter</td><td>待订阅 Topic 名称 </td></tr>
    <tr><td class="paramname">qos</td><td>本次订阅的 QOS 等级 </td></tr>
    <tr><td class="paramname">msg_handler</td><td>订阅消息回调 </td></tr>
    <tr><td class="paramname">context</td><td>订阅响应回调 context</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>结果返回码 </dd></dl>
<dl class="section see"><dt>参见</dt><dd><a class="el" href="tc__iot__const_8h.html#a22976d49fd798dc8f3625734a8b6f6f6" title="系统常见错误码定义，基本定义原则： ">tc_iot_sys_code_e</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a09134bf2b5efb12b4f3f653958819b46"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_iot_mqtt_client_unsubscribe </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tc__iot__mqtt_8h.html#a77c4ce58b6b42a86a23a78ecf4dbdbac">tc_iot_mqtt_client</a> *&#160;</td>
          <td class="paramname"><em>p_mqtt_client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>topic_filter</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>tc_iot_mqtt_client_unsubscribe 取消对某个或多个 Topic 订阅 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_mqtt_client</td><td>MQTT client 对象 </td></tr>
    <tr><td class="paramname">topic_filter</td><td>待取消订阅 Topic 名称</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>结果返回码 </dd></dl>
<dl class="section see"><dt>参见</dt><dd><a class="el" href="tc__iot__const_8h.html#a22976d49fd798dc8f3625734a8b6f6f6" title="系统常见错误码定义，基本定义原则： ">tc_iot_sys_code_e</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a7649fcbe90ba1f9876c3cff38bf2ff3e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_iot_mqtt_client_yield </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tc__iot__mqtt_8h.html#a77c4ce58b6b42a86a23a78ecf4dbdbac">tc_iot_mqtt_client</a> *&#160;</td>
          <td class="paramname"><em>p_mqtt_client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeout_ms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>tc_iot_mqtt_client_yield MQTT client 主循环，包含心跳维持、上行消息响应超时检测、服务器下行消息收取等操作。 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_mqtt_client</td><td>MQTT client 对象 </td></tr>
    <tr><td class="paramname">timeout_ms</td><td>等待时延，单位毫秒</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>结果返回码 </dd></dl>
<dl class="section see"><dt>参见</dt><dd><a class="el" href="tc__iot__const_8h.html#a22976d49fd798dc8f3625734a8b6f6f6" title="系统常见错误码定义，基本定义原则： ">tc_iot_sys_code_e</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ada88e7088bee10e67e2ee1f5efdb2e26"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_iot_ota_construct </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tc__iot__ota__mqtt_8h.html#a701414996b15d90930d3bb1b7925c8b8">tc_iot_ota_handler</a> *&#160;</td>
          <td class="paramname"><em>ota_handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="tc__iot__mqtt_8h.html#a77c4ce58b6b42a86a23a78ecf4dbdbac">tc_iot_mqtt_client</a> *&#160;</td>
          <td class="paramname"><em>mqtt_client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>sub_topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>pub_topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="tc__iot__mqtt_8h.html#adc1265ae64dab46c36579d229d0eb11a">message_handler</a>&#160;</td>
          <td class="paramname"><em>ota_msg_callback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>tc_iot_ota_construct 初始化 OTA 服务对象 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">ota_handler</td><td>待初始化的 OTA 对象 </td></tr>
    <tr><td class="paramname">mqtt_client</td><td>OTA 对象通过 MQTT 协议与服务端通讯，需要指定用于通讯的 MQTT Client。 </td></tr>
    <tr><td class="paramname">sub_topic</td><td>OTA 下行消息 Topic </td></tr>
    <tr><td class="paramname">pub_topic</td><td>OTA 上行消息 Topic </td></tr>
    <tr><td class="paramname">ota_msg_callback</td><td>OTA 下行消息回调通知函数</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>结果返回码，返回 TC_IOT_SUCCESS 则说明获取成功。 </dd></dl>
<dl class="section see"><dt>参见</dt><dd><a class="el" href="tc__iot__const_8h.html#a22976d49fd798dc8f3625734a8b6f6f6" title="系统常见错误码定义，基本定义原则： ">tc_iot_sys_code_e</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a1ad390c38e963aeac4b838d476ff90a3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tc_iot_ota_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tc__iot__ota__mqtt_8h.html#a701414996b15d90930d3bb1b7925c8b8">tc_iot_ota_handler</a> *&#160;</td>
          <td class="paramname"><em>ota_handler</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>tc_iot_ota_destroy OTA 服务析构处理，取消 OTA 消息订阅，释放资源。 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">ota_handler</td><td>待释放的 OTA 服务对象 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a4e44c55e55e97b7437f5fdc82fdb2d1f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_iot_ota_download </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>api_url</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>partial_start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="tc__iot__ota__download_8h.html#aef8efb9ec881ea429413e8acbc909597">tc_iot_http_download_callback</a>&#160;</td>
          <td class="paramname"><em>download_callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>tc_iot_ota_download 根据指定的固件 URL 地址，下载固件 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">api_url</td><td>固件地址 </td></tr>
    <tr><td class="paramname">partial_start</td><td>下载偏移地址，默认填 0，当需要续传时，传需要偏移的值。 </td></tr>
    <tr><td class="paramname">download_callback</td><td>下载过程回调，由于缓存区有限，每下载成功一段数据，就会通过本回调，通知设备端 进行处理，例如，写入到 Flash 中。 </td></tr>
    <tr><td class="paramname">context</td><td>回调透传数据</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>结果返回码 </dd></dl>
<dl class="section see"><dt>参见</dt><dd><a class="el" href="tc__iot__const_8h.html#a22976d49fd798dc8f3625734a8b6f6f6" title="系统常见错误码定义，基本定义原则： ">tc_iot_sys_code_e</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ac6a809ba432d1e7a85535464940dc0f3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_iot_ota_report_firm </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tc__iot__ota__mqtt_8h.html#a701414996b15d90930d3bb1b7925c8b8">tc_iot_ota_handler</a> *&#160;</td>
          <td class="paramname"><em>ota_handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>tc_iot_ota_report_firm 上报设备系统信息 </p>
<dl class="section user"><dt></dt><dd>上报固件信息，固件信息 key 和 value 由根据实际应用场景指定。例如，要上报 固件版本，sdk 版本， 硬件版本，调用方式为：</dd></dl>
<div class="fragment"><div class="line"><a class="code" href="tc__iot__export_8h.html#ac6a809ba432d1e7a85535464940dc0f3">tc_iot_ota_report_firm</a>(&amp;handler,</div><div class="line">        <span class="stringliteral">&quot;product&quot;</span>, g_client_config.device_info.product_id,</div><div class="line">        <span class="stringliteral">&quot;device&quot;</span>, g_client_config.device_info.device_name,</div><div class="line">        <span class="stringliteral">&quot;sdk-ver&quot;</span>, <a class="code" href="tc__iot__config_8h.html#a0294584ac4a78e0e3e4850aa5331d7c0">TC_IOT_SDK_VERSION</a>,</div><div class="line">        <span class="stringliteral">&quot;firm-ver&quot;</span>,TC_IOT_FIRM_VERSION, NULL);</div></div><!-- fragment --><dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">ota_handler</td><td>OTA 对象 </td></tr>
    <tr><td class="paramname">va_list</td><td>可变参数列表，根据实际上报情况指定，格式为 key1,value1,key2,value2, ..., NULL 按照 key value 对方式，依次指定，最后一个参数必须为NULL，作为变参终止符。 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>结果返回码 </dd></dl>
<dl class="section see"><dt>参见</dt><dd><a class="el" href="tc__iot__const_8h.html#a22976d49fd798dc8f3625734a8b6f6f6" title="系统常见错误码定义，基本定义原则： ">tc_iot_sys_code_e</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ac5afcda2817b5958c738207192fda070"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_iot_ota_report_upgrade </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tc__iot__ota__mqtt_8h.html#a701414996b15d90930d3bb1b7925c8b8">tc_iot_ota_handler</a> *&#160;</td>
          <td class="paramname"><em>ota_handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="tc__iot__ota__mqtt_8h.html#a92100f9c84297cd8a36099c8a58faa5b">tc_iot_ota_state_e</a>&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>percent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>tc_iot_ota_report_upgrade OTA 升级执行过程中，上报固件下载及升级进度。 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">ota_handler</td><td>OTA 服务对象 </td></tr>
    <tr><td class="paramname">state</td><td>当前升级进展枚举 </td></tr>
    <tr><td class="paramname">message</td><td>辅助消息 1.当前进展为成功时：上报 TC_IOT_OTA_MESSAGE_SUCCESS ； 2.出错或失败时：上报对应的失败消息或者 TC_IOT_OTA_MESSAGE_FAILED ； </td></tr>
    <tr><td class="paramname">percent</td><td>百分比，0~100，仅当 state 为 OTA_DOWNLOAD 时有效，用来上报下载完成百分比。</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>结果返回码，返回 TC_IOT_SUCCESS 则说明获取成功。 </dd></dl>
<dl class="section see"><dt>参见</dt><dd><a class="el" href="tc__iot__const_8h.html#a22976d49fd798dc8f3625734a8b6f6f6" title="系统常见错误码定义，基本定义原则： ">tc_iot_sys_code_e</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a11d429d2cac023a2e7a98629bf491f68"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_iot_ota_request_content_length </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>api_url</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>tc_iot_ota_request_content_length 获取指定 URL 文件的大小。 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">api_url</td><td>带获取信息的文件 URL</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>结果返回码 </dd></dl>
<dl class="section see"><dt>参见</dt><dd><a class="el" href="tc__iot__const_8h.html#a22976d49fd798dc8f3625734a8b6f6f6" title="系统常见错误码定义，基本定义原则： ">tc_iot_sys_code_e</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a9f98e70812afbe8f44dadb3201227580"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_iot_report_device_data </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tc__iot__shadow_8h.html#acd4137023aa1d1059b75fc2a31bb92c6">tc_iot_shadow_client</a> *&#160;</td>
          <td class="paramname"><em>p_shadow_client</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>tc_iot_report_device_data </p>
<dl class="section user"><dt></dt><dd>检查本地变量数据和服务端差异，上报设备数据模板参数最新数据状态，更新到服务端。</dd></dl>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_shadow_client</td><td>设备影子对象 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>结果返回码 </dd></dl>
<dl class="section see"><dt>参见</dt><dd><a class="el" href="tc__iot__const_8h.html#a22976d49fd798dc8f3625734a8b6f6f6" title="系统常见错误码定义，基本定义原则： ">tc_iot_sys_code_e</a> </dd></dl>

</div>
</div>
<a class="anchor" id="aa9ac071176fa16739d07b3ab20fa3e7b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_iot_server_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tc__iot__shadow_8h.html#acd4137023aa1d1059b75fc2a31bb92c6">tc_iot_shadow_client</a> *&#160;</td>
          <td class="paramname"><em>p_shadow_client</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>tc_iot_server_destroy 数据模板服务析构处理，释放资源。 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_shadow_client</td><td>设备影子对象 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>结果返回码 </dd></dl>
<dl class="section see"><dt>参见</dt><dd><a class="el" href="tc__iot__const_8h.html#a22976d49fd798dc8f3625734a8b6f6f6" title="系统常见错误码定义，基本定义原则： ">tc_iot_sys_code_e</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ac19ed60474eda4cb0aa71f5502702674"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_iot_server_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tc__iot__shadow_8h.html#acd4137023aa1d1059b75fc2a31bb92c6">tc_iot_shadow_client</a> *&#160;</td>
          <td class="paramname"><em>p_shadow_client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="tc__iot__shadow_8h.html#a83a16bc5fc5ae019a28afe92e77a9b43">tc_iot_shadow_config</a> *&#160;</td>
          <td class="paramname"><em>p_client_config</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>tc_iot_server_init 根据设备配置参数，初始化服务。 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_shadow_client</td><td>设备服务对象 </td></tr>
    <tr><td class="paramname">p_client_config</td><td>服务配置参数。 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>结果返回码 </dd></dl>
<dl class="section see"><dt>参见</dt><dd><a class="el" href="tc__iot__const_8h.html#a22976d49fd798dc8f3625734a8b6f6f6" title="系统常见错误码定义，基本定义原则： ">tc_iot_sys_code_e</a> </dd></dl>

</div>
</div>
<a class="anchor" id="acb1e29725d6bf7b8dd0cce6a13570958"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_iot_server_loop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tc__iot__shadow_8h.html#acd4137023aa1d1059b75fc2a31bb92c6">tc_iot_shadow_client</a> *&#160;</td>
          <td class="paramname"><em>p_shadow_client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>yield_timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>tc_iot_server_loop 服务任务主循环函数，接收服务推送及响应数据。 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_shadow_client</td><td>设备服务对象 </td></tr>
    <tr><td class="paramname">yield_timeout</td><td>循环等待时间，单位毫秒 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>结果返回码 </dd></dl>
<dl class="section see"><dt>参见</dt><dd><a class="el" href="tc__iot__const_8h.html#a22976d49fd798dc8f3625734a8b6f6f6" title="系统常见错误码定义，基本定义原则： ">tc_iot_sys_code_e</a> </dd></dl>

</div>
</div>
<a class="anchor" id="aacdb67168a3c3b31b9ba2181282a076d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tc_iot_set_log_level </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tc__iot__log_8h.html#a30b9363d110f0613cca8e8b4241b737b">tc_iot_log_level_e</a>&#160;</td>
          <td class="paramname"><em>log_level</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>tc_iot_set_log_level 设置日志最低输出级别 </p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">log_level</td><td>需要设置的日志级别 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
制作者 &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
